(()=>{"use strict";var t={577:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.statusBadgeHtml=e.getStatusForNote=e.setStatusForNote=void 0;const o=a(998),n="noteStatus";e.setStatusForNote=async function(t,e){if(!t)return;const a=await o.default.data.get(["notes",t],{fields:["user_data"]});if(!a)return;let s={};try{s=a.user_data?JSON.parse(a.user_data):{}}catch(t){}null===e?delete s[n]:s[n]=e,await o.default.data.put(["notes",t],null,{user_data:JSON.stringify(s)})},e.getStatusForNote=async function(t){var e;if(!t)return null;const a=await o.default.data.get(["notes",t],{fields:["user_data"]});if(!a||!a.user_data)return null;try{return null!==(e=JSON.parse(a.user_data)[n])&&void 0!==e?e:null}catch(t){return null}},e.statusBadgeHtml=function(t){return`\n        <style>\n            #noteStatusToolbarBadge .panel-title { display: none !important; }\n\n            .note-status-toolbar-badge {\n                font: 400 14px/1.2 system-ui;\n                color: #fff;\n                background: ${t?{Active:"#3b82f6",Completed:"#10b981","On Hold":"#f59e0b",Dropped:"#ef4444"}[t]:"#6b7280"};\n                padding: 6px 12px;\n                border-radius: 8px;\n                display: inline-block;\n                box-shadow: 0 0 4px rgba(0,0,0,0.3);\n            }\n\n            #noteStatusToolbarBadge {\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                padding: 6px;\n            }\n        </style>\n\n        <div class="note-status-toolbar-badge">${t?{Active:"üî•",Completed:"‚úÖ","On Hold":"‚è∏Ô∏è",Dropped:"‚ùå"}[t]:""} ${null!=t?t:"None"}</div>\n    `}},998:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=joplin}},e={};function a(o){var n=e[o];if(void 0!==n)return n.exports;var s=e[o]={exports:{}};return t[o](s,s.exports,a),s.exports}(()=>{const t=a(998),e=a(577);t.default.plugins.register({onStart:async()=>{const a=await t.default.views.dialogs.create("statusPicker");await t.default.views.dialogs.setButtons(a,[{id:"ok"},{id:"cancel"}]);const o=await t.default.views.panels.create("noteStatusToolbarBadge"),n=async()=>{const a=await t.default.workspace.selectedNote(),n=a?await(0,e.getStatusForNote)(a.id):null;await t.default.views.panels.setHtml(o,(0,e.statusBadgeHtml)(n))};await t.default.commands.register({name:"openStatusPicker",label:"Set Note Status",iconName:"fas fa-clipboard",execute:async()=>{var o,s,l,i;const d=await t.default.workspace.selectedNote();if(!d)return;const r=await(0,e.getStatusForNote)(d.id);await(e=>t.default.views.dialogs.setHtml(a,`\n            <form name="statusForm">\n                <div style="font: 14px system-ui; min-width: 260px;">\n                    <label for="statusSelect" style="display:block; margin-bottom:6px;">Select status</label>\n                    <select name="statusSelect" id="statusSelect" style="width:100%; padding:6px;">\n                        <option value="" ${e?"":"selected"}>None (clear)</option>\n                        <option value="Active" ${"Active"===e?"selected":""}>Active üî•</option>\n                        <option value="Completed" ${"Completed"===e?"selected":""}>Completed ‚úÖ</option>\n                        <option value="On Hold" ${"On Hold"===e?"selected":""}>On Hold ‚è∏Ô∏è</option>\n                        <option value="Dropped" ${"Dropped"===e?"selected":""}>Dropped ‚ùå</option>\n                    </select>\n                </div>\n            </form>\n        `))(r);const u=await t.default.views.dialogs.open(a);if("ok"!==u.id)return;const c=null!==(o=u.formData)&&void 0!==o?o:await(null===(l=(s=t.default.views.dialogs).getFormData)||void 0===l?void 0:l.call(s,a)),p=(null===(i=null==c?void 0:c.statusForm)||void 0===i?void 0:i.statusSelect)||null;await(async(t,a)=>{await(0,e.setStatusForNote)(t,a),await n()})(d.id,p)}}),await t.default.views.toolbarButtons.create("noteStatusPickerBtn","openStatusPicker","editorToolbar"),await t.default.workspace.onNoteSelectionChange(n),await t.default.workspace.onNoteChange(async e=>{const a=await t.default.workspace.selectedNote();a&&a.id===e.id&&await n()}),await n()}})})()})();